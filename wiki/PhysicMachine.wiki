#summary The physics engine
#labels Phase-Implementation

= Pymunk =

Physics has been implemented using [http://www.pyweek.org/d/932/ pymunk] python bindings of the [http://wiki.slembcke.net/main/published/Chipmunk  chipmunk physics engine].

This is a very flexible engine that will allow us to implement things like explosions. Hopefully buoyancy will be implemented by the time it's needed.

= Event driven wrapper =

Pymunk itself is a very thin wrapper of Chipmunk. Collisions can be handled registering a function that gets called every time it occurs a collision between two objects of two predefined groups. 

To decouple the game from the system and handle the complexity I expect to have soon, we will use an event driven wrapper to pymunk (ideally, it will be contributed to pymunk if the maintainer thinks it is good enough).

The system will send messages every time one of this occurs:

 * [EventCOLLISION] - Two objects enter in contact
 * [EventCONTACT_LOST] - Two objects loose contact
 * [EventOBJECT_TOO_FAST] - An object is moving faster than a given threshold. (useful for objects that are falling out of control outside the map)
 * [EventOBJECT_AT_REST] - Probably useful. Will add if it is.
 * [EventPHYS_CHANGE_CANCELED] - A previous request for a change of state can't be processed.
 * [EventPHYS_CHANGE_OK] - A previous request for a change of state has been processed.
 
The system will also listen for the following messages:

 * Motion requests: A request asking a certain movement in a character, generated by the animators system.